# Intellinote REST Client for JavaScript / Node.js

This module contains a Node.js class that wraps the [Intellinote REST API (v2)](https://api.intellinote.net/rest/api/v2/) in a simple interface.

## Obtaining

### Via npm

A pre-"compiled" version of this module is published on [npm](https://www.npmjs.com/package/intellinote-cli) as [`intellinote-client`](https://www.npmjs.com/package/intellinote-cli).  

Run `npm install --save intellinote-client` to add it as a dependency in your `package.json`.

### Via Git

The source code for this module is published on [GitHub](https://github.com/) as [`intellinote/intellinote-client`](https://github.com/intellinote/inote-util).  

Clone the repository with `git clone git@github.com:intellinote/inote-util.git` and then run `make install` (or `npm install`) to install the external libraries that are needed.

## Using

To use the library you'll need an OAuth2 "access-token" value, which you can obtain via the OAuth2 process or generate at <https://api.intellinote.net/rest/account/api-tokens>.

Once installed, the usage is straightforward:

```js
var MY_ACCESS_TOKEN = "replace with your access token";
var IntellinoteClient = require("intellinote-client").IntellinoteClient;

var client = new IntellinoteClient(MY_ACCESS_TOKEN);

client.getNotes({note_type:"CHAT"},function (err, notes) {
  if(err) {
    console.error("An error occurred:",err);
  } else {
    console.log("Here are your most recent chat messages:");
    console.log(JSON.stringify(notes,null,2));
  }
})
```

Each API method directly corresponds with a REST endpoint (as described [here](https://api.intellinote.net/rest/api/v2/)). In the example above, the `client.getNotes` call corresponds to [`GET /notes`](https://api.intellinote.net/rest/api/v2/#!/notes/get_notes).

"Path parameters", if any, are translated as arguments to the function.

If a request body is needed, it is passed as a JSON object as another argument to the function.

The next argument to the function is an (optional) map of query-string parameters.  This value can be omitted entirely.

Finally a callback method is passed.  That method is expected to have the signature `err, json, response, body`, where

  - `err` is an `Error` object, if an error occurred.
  - `json` is an object generated by parsing the response body as JSON. If the body is missing or cannot be parsed as JSON, this parameter will be `null`.
  - `response` is the response object as returned by the underlying [request](https://github.com/request/request) API.
  - `body` is the HTTP response body (if any).  This is especially useful when the body is a non-JSON response.

## The API Methods

### Fetching 
  * `getNote(noteID_or_noteUUID,[qs],callback)`
  * `getNotes([qs],callback)`
  * `getOrg(orgID,[qs],callback)`
  * `getWorkspace(orgID,wsID,[qs],callback)`
  * `getWorkspacesInOrg(orgID,[qs],callback)`
  * `getWorkspaceMembers(orgID,wsID,[qs],callback)`
  * `getOrgMembers(orgID,[qs],callback)`
  * `getOrgs([qs],callback)`
  * `getUsers([qs],callback)`
  * `getUser(userID_or_emailAddr,[qs],callback)`
  * `getUserPresence(userID_or_emailAddr,[qs],callback)`

### Creating & Adding
  * `postUser(user,[qs],callback)`
  * `postOrg(org,[qs],callback)`
  * `postWorkspace(orgID,ws,[qs],callback)`
  * `postNote(orgID,wsID,note,[qs],callback)`
  * `postMessageToUser(orgID,userID_or_emailAddr,payload,[qs],callback)`
  * `postMessageToWorkspace(orgID,wsId,payload,[qs],callback)`
  * `postWorkspaceMember(orgID,wsId,userID_or_emailAddr,payload,[qs],callback)`
  * `postOrgMember(orgID,userID_or_emailAddr,payload,[qs],callback)`

### Updating
  * `putOrg(orgID,payload,[qs],callback)`
  * `putWorkspace(orgID,wsID,payload,[qs],callback)`
  * `putWorkspaceMember(orgID,wsId,userID_or_emailAddr,payload,[qs],callback)`
  * `putOrgMember(orgID,userID_or_emailAddr,payload,[qs],callback)`
  * `putNote(orgID,wsID,noteID_or_noteUUID,payload,[qs],callback)`
  * `putUser(userID_or_emailAddr,payload,[qs],callback)`
  * `putUserPresence(userID_or_emailAddr,payload,[qs],callback)`

### Destroying & Removing 
  * `deleteNote(orgID,workspaceID,noteID_or_noteUUID,[qs],callback)`
  * `deleteOrg(orgID,[qs],callback)`
  * `deleteWorkspace(orgID,wsID,[qs],callback)`
  * `deleteWorkspaceMember(orgID,wsID,userID_or_emailAddr,[qs],callback)`
  * `deleteOrgMember(orgID,userID_or_emailAddr,[qs],callback)`
  * `deleteOrgs([qs],callback)`
  * `deleteUser(userID_or_emailAddr,[qs],callback)`

### Testing & Debugging
  * `getEcho([qs],callback)`
  * `putEcho(body,[qs],callback)`
  * `postEcho(body,[qs],callback)`
  * `deleteEcho([qs],callback)`
  * `getPing([qs],callback)`

